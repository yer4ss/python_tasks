import logging
import asyncio
from aiogram import Bot, Dispatcher, types
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
from aiogram.filters import Command
from aiogram.types import CallbackQuery
from aiogram.types import InputFile

TOKEN = "8137093677:AAFk7pvkeH819sk5nLPLkanJD774U6WHYCg"

bot = Bot(token=TOKEN)
dp = Dispatcher()

regions = {
   "Северный Казахстан": ["Петропавловск", "Кокшетау", "Костанай", "Астана"],
   "Южный Казахстан": ["Шымкент", "Тараз", "Кызылорда", "Туркестан", "Алматы"],
   "Западный Казахстан": ["Атырау", "Уральск", "Актау", "Актобе"],
   "Восточный Казахстан": ["Усть-Каменогорск", "Семей", "Павлодар"],
   "Центральный Казахстан": ["Караганда", "Темиртау", "Балхаш"]
}

city_info = {
   "Астана": ("Столица Казахстана, известная своей современной архитектурой. Город знаменит своими футуристическими зданиями, такими как Байтерек, Хан Шатыр и Дворец мира и согласия. В Астане проходят важные экономические и культурные форумы мирового уровня. Зимой город превращается в снежную сказку, а летом привлекает гостей своими зелёными парками.", 
               "A:/yer4ss/Work/im python/bot gid/images/Астана.jpg"),
   "Алматы": ("Крупнейший город Казахстана, окружённый живописными горами Заилийского Алатау. Известен как культурный и финансовый центр страны. Здесь расположены знаменитый высокогорный каток Медео, горнолыжный курорт Шымбулак и смотровая площадка Кок-Тобе. Алматы славится своими зелёными улицами, уютными кафе и богатой историей.", 
               "A:/yer4ss/Work/im python/bot gid/images/Алматы.jpg"),
   "Шымкент": ("Третий по величине город Казахстана, известный своими восточными базарами, гостеприимством и богатой историей. Основанный более 2 200 лет назад, он является одним из древнейших городов региона. Здесь можно посетить этнографический комплекс «Кен-Баба», медресе XIX века и Археологический музей.", 
               "A:/yer4ss/Work/im python/bot gid/images/Шымкент.jpg"),
   "Кокшетау": ("Живописный город, окружённый озёрами и лесами. Кокшетау славится своими курортными зонами, такими как Бурабай и Зеренда, привлекающими туристов круглый год. Бурабай часто называют \"Казахстанской Швейцарией\" из-за его горных пейзажей и чистых озёр.", 
               "A:/yer4ss/Work/im python/bot gid/images/Кокшетау.jpg"),
   "Костанай": ("Город с богатым культурным наследием, расположенный на севере Казахстана. Здесь можно найти исторические памятники, музеи и театры. В регионе развита сельскохозяйственная и промышленная отрасль. В Костанае также проходит ежегодный фестиваль «Тобол-фест», посвящённый народным традициям.", 
               "A:/yer4ss/Work/im python/bot gid/images/Костанай.jpg"),
   "Петропавловск": ("Один из старейших городов Казахстана, основанный в XVIII веке. Здесь сохранилось множество архитектурных памятников, включая Петропавловскую крепость. Город известен своими уютными набережными, а также музеем литературы и искусства, посвящённым творчеству казахских писателей.", 
               "A:/yer4ss/Work/im python/bot gid/images/Петропавловск.jpg"),
   "Тараз": ("Один из древнейших городов Центральной Азии с историей более 2 000 лет. Тараз славится древними мавзолеями Карахана и Айша-биби, которые являются важными культурными памятниками. Город также называют 'колыбелью казахской цивилизации' за его археологическое и историческое значение.", 
               "A:/yer4ss/Work/im python/bot gid/images/Тараз.jpg"),
   "Кызылорда": ("Город на реке Сырдарья, исторический центр Казахстана. Здесь в XIX веке располагалась первая столица Казахской АССР. Кызылорда также известна как центр казахской национальной письменности и образования, а поблизости находится знаменитый космодром Байконур.", 
               "A:/yer4ss/Work/im python/bot gid/images/Кызылорда.jpg"),
   "Туркестан": ("Один из самых древних и священных городов Казахстана. Здесь находится мавзолей Ходжи Ахмеда Ясави – объект Всемирного наследия ЮНЕСКО. Туркестан является духовным и культурным центром страны, ежегодно привлекающим тысячи паломников и туристов.", 
               "A:/yer4ss/Work/im python/bot gid/images/Туркестан.jpg"),
   "Атырау": ("Нефтяная столица Казахстана, расположенная на реке Урал. Город разделён на две части, европейскую и азиатскую. Атырау известен своими рыбными промыслами, нефтяными месторождениями и современными небоскрёбами.", 
               "A:/yer4ss/Work/im python/bot gid/images/Атырау.jpg"),
   "Уральск": ("Исторический город на западе Казахстана, основанный в XVI веке. Уральск славится своей старинной архитектурой, особенно Казанским собором и домом Пугачёва. Здесь можно посетить музеи, посвящённые истории казачества и древнего Золотого Орды.", 
               "A:/yer4ss/Work/im python/bot gid/images/Уральск.jpg"),
   "Актау": ("Город у Каспийского моря с красивыми пляжами и скалистыми пейзажами. Является важным портовым и туристическим центром. Вблизи города можно посетить урочище Босжира и подземную мечеть Бекет-Ата, считающуюся святыней.", 
               "A:/yer4ss/Work/im python/bot gid/images/Актау.jpg"),
   "Актобе": ("Динамично развивающийся город на западе Казахстана. Здесь расположены крупные металлургические заводы и современные торговые центры. В окрестностях города можно посетить уникальные геологические образования – меловые горы Актау.", 
               "A:/yer4ss/Work/im python/bot gid/images/Актобе.jpg"),
   "Усть-Каменогорск": ("Город металлургов, расположенный среди гор Восточного Казахстана. Он известен своими красивыми природными пейзажами, такими как Бухтарминское водохранилище и национальный парк Катон-Карагай.", 
               "A:/yer4ss/Work/im python/bot gid/images/Усть-Каменогорск.jpg"),
   "Семей": ("Исторический город, связанный с именем Абая Кунанбаева. В Семее расположен музей Абая, старейшая мечеть Казахстана и мост через Иртыш – один из самых длинных в Центральной Азии.", 
               "A:/yer4ss/Work/im python/bot gid/images/Семей.jpg"),
   "Павлодар": ("Город с развитой промышленностью и живописными набережными. Павлодар известен своими современными театрами, музеями и близостью к национальному парку Баянаул.", 
               "A:/yer4ss/Work/im python/bot gid/images/Павлодар.jpg"),
   "Караганда": ("Крупный промышленный центр Казахстана, связанный с угольной промышленностью. Город славится своим театром имени Станиславского и парком Ботанический сад. Недалеко находится музей ГУЛАГа в поселке Долинка.", 
               "A:/yer4ss/Work/im python/bot gid/images/Караганда.jpg"),
   "Темиртау": ("Город металлургов, важный центр чёрной металлургии Казахстана. Здесь находится крупнейший металлургический завод страны. Также город известен своим ледовым дворцом и живописной набережной реки Нура.", 
               "A:/yer4ss/Work/im python/bot gid/images/Темиртау.jpg"),
   "Балхаш": ("Город на берегу одноимённого озера, которое наполовину пресное, наполовину солёное. Балхаш привлекает туристов своими пляжами, рыбалкой и уникальной природой.", 
               "A:/yer4ss/Work/im python/bot gid/images/Балхаш.jpg")
}

# Главное меню (выбор региона)
def get_regions_keyboard():
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text=region, callback_data=f"region:{region}")] for region in regions.keys()
    ])
    return keyboard

# Меню городов
def get_cities_keyboard(region):
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text=city, callback_data=f"city:{city}")] for city in regions[region]
    ] + [[InlineKeyboardButton(text="⬅ Назад", callback_data="back")]])
    return keyboard

@dp.message(Command("start"))
async def start_command(message: types.Message):
    await message.answer("Привет! Я бот-гид. Выберите регион:", reply_markup=get_regions_keyboard())

@dp.message(Command("about"))
async def about_command(message: types.Message):
    await message.answer("Я бот-гид по Казахстану. Выбирайте регион и город, и я расскажу вам о нем!")

@dp.message(Command("help"))
async def help_command(message: types.Message):
    await message.answer("Используйте /start для выбора региона, затем выберите город, чтобы получить информацию.")

@dp.callback_query(lambda c: c.data.startswith("region:"))
async def process_region(callback_query: CallbackQuery):
    region = callback_query.data.split(":")[1]
    await callback_query.message.edit_text(f"Вы выбрали: {region}\nТеперь выберите город:", 
                                           reply_markup=get_cities_keyboard(region))

@dp.callback_query(lambda c: c.data.startswith("city:"))
async def process_city(callback_query: CallbackQuery):
    city = callback_query.data.split(":")[1]
    info, photo_path = city_info.get(city, ("Информации пока нет.", None))
    
    if photo_path:
        photo = InputFile(photo_path)  # Загружаем фото из локального файла
        await bot.send_photo(callback_query.message.chat.id, photo, caption=info)
    else:
        await bot.send_message(callback_query.message.chat.id, info)

@dp.callback_query(lambda c: c.data == "back")
async def back_to_regions(callback_query: CallbackQuery):
    await callback_query.message.edit_text("Выберите регион:", reply_markup=get_regions_keyboard())

async def main():
    logging.basicConfig(level=logging.INFO)
    await bot.delete_webhook(drop_pending_updates=True)
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())
